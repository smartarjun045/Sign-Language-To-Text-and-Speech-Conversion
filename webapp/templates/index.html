<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Language Recognition - Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="app-page">
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-brand">
            <div class="logo">
                <i class="fas fa-hands"></i>
                <span>Gesture Voice: Sign Language Interpreter</span>
            </div>
        </div>
        
        <div class="nav-controls">
            <div class="user-info">
                <i class="fas fa-user-circle"></i>
                <span>Welcome, {{ user.username if user else 'User' }}</span>
            </div>
            <div class="nav-buttons">
                <a href="/profile" class="nav-btn" title="Profile">
                    <i class="fas fa-cog"></i>
                </a>
                <a href="{{ url_for('logout') }}" class="nav-btn" title="Logout">
                    <i class="fas fa-sign-out-alt"></i>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Control Panel -->
        <div class="control-panel">
            <div class="panel-section">
                <h3><i class="fas fa-video"></i> Camera Controls</h3>
                <div class="control-group">
                    <button id="startCameraBtn" class="control-btn primary">
                        <i class="fas fa-play"></i> Start Camera
                    </button>
                    <button id="stopCameraBtn" class="control-btn secondary" disabled>
                        <i class="fas fa-stop"></i> Stop Camera
                    </button>
                </div>
                <div class="status-indicator">
                    <span id="cameraStatus" class="status-text">Camera: Off</span>
                    <div id="cameraStatusLight" class="status-light off"></div>
                </div>
            </div>

            <div class="panel-section">
                <h3><i class="fas fa-hand-paper"></i> Recognition</h3>
                <div class="control-group">
                    <button id="startRecognitionBtn" class="control-btn primary" disabled>
                        <i class="fas fa-brain"></i> Start Recognition
                    </button>
                    <button id="stopRecognitionBtn" class="control-btn secondary" disabled>
                        <i class="fas fa-pause"></i> Stop Recognition
                    </button>
                </div>
                <div class="status-indicator">
                    <span id="recognitionStatus" class="status-text">Recognition: Off</span>
                    <div id="recognitionStatusLight" class="status-light off"></div>
                </div>
            </div>

            <div class="panel-section">
                <h3><i class="fas fa-volume-up"></i> Audio</h3>
                <div class="control-group">
                    <button id="speakBtn" class="control-btn accent">
                        <i class="fas fa-play-circle"></i> Speak Text
                    </button>
                    <button id="clearBtn" class="control-btn warning">
                        <i class="fas fa-trash"></i> Clear Text
                    </button>
                </div>
            </div>
        </div>

        <!-- Video Feed Section -->
        <div class="video-section">
            <div class="video-container">
                <div id="videoPlaceholder" class="video-placeholder">
                    <i class="fas fa-video-slash"></i>
                    <p>Camera feed will appear here</p>
                    <small>Click "Start Camera" to begin</small>
                </div>
                <img id="videoFeed" class="video-feed" style="display: none;" alt="Video Feed">
            </div>
            
            <!-- Current Character Display -->
            <div class="character-display">
                <div class="character-label">Current Character:</div>
                <div id="currentCharacter" class="character-value">-</div>
            </div>
        </div>

        <!-- Text Output Section -->
        <div class="text-section">
            <div class="text-output">
                <h3><i class="fas fa-comment-alt"></i> Recognized Text</h3>
                <div id="recognizedText" class="text-display" contenteditable="true" 
                     placeholder="Recognized text will appear here..."></div>
                <div class="text-stats">
                    <span id="charCount">0 characters</span>
                    <span id="wordCount">0 words</span>
                </div>
            </div>

            <!-- Word Suggestions -->
            <div class="suggestions-panel">
                <h4><i class="fas fa-lightbulb"></i> Word Suggestions</h4>
                <div class="suggestion-buttons">
                    <button id="suggestion1" class="suggestion-btn" style="display: none;"></button>
                    <button id="suggestion2" class="suggestion-btn" style="display: none;"></button>
                    <button id="suggestion3" class="suggestion-btn" style="display: none;"></button>
                    <button id="suggestion4" class="suggestion-btn" style="display: none;"></button>
                </div>
                <div class="no-suggestions" id="noSuggestions">
                    <i class="fas fa-info-circle"></i>
                    <span>Start typing to see word suggestions</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Panel (Initially Hidden) -->
    <div id="helpPanel" class="help-panel hidden">
        <div class="help-content">
            <div class="help-header">
                <h3><i class="fas fa-question-circle"></i> How to Use</h3>
                <button id="closeHelpBtn" class="close-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="help-sections">
                <div class="help-section">
                    <h4>Getting Started</h4>
                    <ol>
                        <li>Click "Start Camera" to activate your webcam</li>
                        <li>Click "Start Recognition" to begin gesture detection</li>
                        <li>Position your hand clearly in the camera view</li>
                        <li>Make ASL fingerspelling gestures (A-Z)</li>
                    </ol>
                </div>
                
                <div class="help-section">
                    <h4>Tips for Better Recognition</h4>
                    <ul>
                        <li>Ensure good lighting on your hand</li>
                        <li>Use a plain background when possible</li>
                        <li>Keep your entire hand visible in the frame</li>
                        <li>Hold gestures steady for 1-2 seconds</li>
                        <li>Maintain consistent distance from camera</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h4>Special Gestures</h4>
                    <ul>
                        <li><strong>Space:</strong> Creates space between words</li>
                        <li><strong>Next:</strong> Confirms the current character</li>
                        <li><strong>Backspace:</strong> Deletes the last character</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Help Button -->
    <button id="helpBtn" class="help-btn" title="Help">
        <i class="fas fa-question"></i>
    </button>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Error Messages -->
    <div id="errorMessage" class="error-message hidden">
        <div class="error-content">
            <i class="fas fa-exclamation-triangle"></i>
            <span id="errorText"></span>
            <button id="closeErrorBtn" class="close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Success Messages -->
    <div id="successMessage" class="success-message hidden">
        <div class="success-content">
            <i class="fas fa-check-circle"></i>
            <span id="successText"></span>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>